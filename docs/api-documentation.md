# üìö API Documentation

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ REST API Clarity.

**Base URL:** `http://localhost:8080`

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <token>
```

---

## üîì –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### `GET /health`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET localhost:8080/health
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:** –ù–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "status": "ok"
}
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### `POST /api/register`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http POST localhost:8080/api/register email=user@example.com password=password123
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- `email` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –≤–∞–ª–∏–¥–Ω—ã–π email
- `password` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "created_at": "2025-12-06T00:00:00Z"
  }
}
```

**–û—à–∏–±–∫–∏:**
- `400` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `409` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

### `POST /api/login`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http POST localhost:8080/api/login email=user@example.com password=password123
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "created_at": "2025-12-06T00:00:00Z"
  }
}
```

**–û—à–∏–±–∫–∏:**
- `401` ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## üí≥ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### `POST /api/transactions`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http POST localhost:8080/api/transactions \
  "Authorization: Bearer <token>" \
  amount:=-500 \
  description:="–û–±–µ–¥ –≤ –∫–∞—Ñ–µ" \
  type:=expense \
  ref_no:="TAXI001"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "amount": -500,
  "description": "–û–±–µ–¥ –≤ –∫–∞—Ñ–µ",
  "ref_no": "TAXI001",
  "date": "2025-12-06",
  "type": "expense",
  "is_essential": false
}
```

**–ü–æ–ª—è:**
- `amount` (float, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) ‚Äî —Å—É–º–º–∞ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤)
- `description` (string) ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `ref_no` (string) ‚Äî —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –Ω–æ–º–µ—Ä (–¥–ª—è ML –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- `date` (string) ‚Äî –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞)
- `type` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) ‚Äî `"income"` –∏–ª–∏ `"expense"`
- `is_essential` (boolean) ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "id": 1,
  "user_id": 1,
  "amount": -500,
  "description": "–û–±–µ–¥ –≤ –∫–∞—Ñ–µ",
  "ref_no": "TAXI001",
  "category": "Food",
  "date": "2025-12-06T00:00:00Z",
  "type": "expense",
  "is_essential": false,
  "created_at": "2025-12-06T00:00:00Z"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤
- –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ‚Üí ML ‚Üí –ø—Ä–∞–≤–∏–ª–∞
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –∞–Ω–æ–º–∞–ª–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

### `GET /api/transactions`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
# –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
http GET localhost:8080/api/transactions "Authorization: Bearer <token>"

# –° –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
http GET "localhost:8080/api/transactions?limit=10&offset=0" "Authorization: Bearer <token>"

# –§–∏–ª—å—Ç—Ä –ø–æ –º–µ—Å—è—Ü—É
http GET "localhost:8080/api/transactions?month=2025-12" "Authorization: Bearer <token>"

# –§–∏–ª—å—Ç—Ä –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç
http GET "localhost:8080/api/transactions?start_date=2025-12-01&end_date=2025-12-31" "Authorization: Bearer <token>"
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int) ‚Äî –º–∞–∫—Å–∏–º—É–º –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100, –º–∞–∫—Å–∏–º—É–º 1000)
- `offset` (int) ‚Äî —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
- `month` (string) ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–µ—Å—è—Ü—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM
- `start_date` (string) ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- `end_date` (string) ‚Äî –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
[
  {
    "id": 1,
    "user_id": 1,
    "amount": -500,
    "description": "–û–±–µ–¥ –≤ –∫–∞—Ñ–µ",
    "ref_no": "TAXI001",
    "category": "Food",
    "date": "2025-12-06T00:00:00Z",
    "type": "expense",
    "is_essential": false,
    "created_at": "2025-12-06T00:00:00Z"
  }
]
```

---

### `PATCH /api/transactions/:id`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—Ä—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞)

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http PATCH localhost:8080/api/transactions/1 \
  "Authorization: Bearer <token>" \
  category:="Transport"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "category": "Transport"
}
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "id": 1,
  "user_id": 1,
  "amount": -500,
  "description": "–û–±–µ–¥ –≤ –∫–∞—Ñ–µ",
  "category": "Transport",
  "date": "2025-12-06T00:00:00Z",
  "type": "expense",
  "is_essential": false,
  "created_at": "2025-12-06T00:00:00Z"
}
```

**–û—à–∏–±–∫–∏:**
- `404` ‚Äî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `403` ‚Äî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

### `DELETE /api/transactions/:id`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http DELETE localhost:8080/api/transactions/1 "Authorization: Bearer <token>"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:** –ù–µ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "message": "Transaction deleted"
}
```

---

### `GET /api/transactions/export`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ CSV —Ñ–∞–π–ª

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
# –°–∫–∞—á–∞—Ç—å CSV —Ñ–∞–π–ª
http GET localhost:8080/api/transactions/export "Authorization: Bearer <token>" --download

# –ò–ª–∏ —á–µ—Ä–µ–∑ curl
curl -H "Authorization: Bearer <token>" http://localhost:8080/api/transactions/export -o transactions.csv
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:** –ù–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** CSV —Ñ–∞–π–ª —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏:
```csv
date,amount,type,description,ref_no,category,is_essential
2025-12-06,-500.00,expense,–û–±–µ–¥ –≤ –∫–∞—Ñ–µ,TAXI001,Food,false
2025-12-05,50000.00,income,–ó–∞—Ä–ø–ª–∞—Ç–∞,CHAS,Salary,false
```

**–§–æ—Ä–º–∞—Ç CSV:**
- `date` ‚Äî –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- `amount` ‚Äî —Å—É–º–º–∞ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤)
- `type` ‚Äî —Ç–∏–ø: `income` –∏–ª–∏ `expense`
- `description` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `ref_no` ‚Äî —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –Ω–æ–º–µ—Ä
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ ML)
- `is_essential` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ (true/false)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å –∏–º–µ–Ω–µ–º `transactions_YYYYMMDD_HHMMSS.csv`
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ 10000 –∑–∞–ø–∏—Å–µ–π)

---

### `POST /api/transactions/import`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ò–º–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ CSV —Ñ–∞–π–ª–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
# –ò–º–ø–æ—Ä—Ç —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
http --form POST localhost:8080/api/transactions/import \
  "Authorization: Bearer <token>" \
  file@transactions.csv \
  skip_errors:=true
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:** 
- `file` (multipart/form-data) ‚Äî CSV —Ñ–∞–π–ª —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- `skip_errors` (form field, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ) ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏–º–ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`)

**–§–æ—Ä–º–∞—Ç CSV —Ñ–∞–π–ª–∞:**

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `date` ‚Äî –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD (–∏–ª–∏ YYYY/MM/DD, DD.MM.YYYY, DD-MM-YYYY)
- `amount` ‚Äî —Å—É–º–º–∞ (–º–æ–∂–Ω–æ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏ –∑–∞–ø—è—Ç—ã–º–∏: "1 000,50" –∏–ª–∏ "1,000.50")
- `type` ‚Äî —Ç–∏–ø: `income` –∏–ª–∏ `expense`

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `description` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `ref_no` ‚Äî —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –Ω–æ–º–µ—Ä
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ ML –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤)
- `is_essential` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ (true/false/1/0/yes/–¥–∞)

**–ü—Ä–∏–º–µ—Ä CSV:**
```csv
date,amount,type,description,ref_no,is_essential
2025-12-06,-500.00,expense,–û–±–µ–¥ –≤ –∫–∞—Ñ–µ,TAXI001,false
2025-12-05,50000.00,income,–ó–∞—Ä–ø–ª–∞—Ç–∞,CHAS,false
2025-12-04,-1500.00,expense,–ê—Ä–µ–Ω–¥–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã,,true
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "total": 3,
  "imported": 2,
  "failed": 1,
  "errors": [
    "Row 2: invalid date format: 2025-13-45 (expected YYYY-MM-DD)"
  ]
}
```

**–ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞:**
- `total` ‚Äî –≤—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –≤ CSV (–≤–∫–ª—é—á–∞—è –∑–∞–≥–æ–ª–æ–≤–æ–∫)
- `imported` ‚Äî —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `failed` ‚Äî –Ω–µ —É–¥–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
- `errors` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ (–≥–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ‚Üí ML ‚Üí –ø—Ä–∞–≤–∏–ª–∞)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞—Ç
- –ì–∏–±–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—É–º–º (—Å –ø—Ä–æ–±–µ–ª–∞–º–∏, –∑–∞–ø—è—Ç—ã–º–∏)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –∞–Ω–æ–º–∞–ª–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –†–µ–∂–∏–º `skip_errors=true` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–º–ø–æ—Ä—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö

**–û—à–∏–±–∫–∏:**
- `400` ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç CSV
- `400` ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- `400` ‚Äî –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–µ—Å–ª–∏ `skip_errors=false`)

---

## üí∞ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

### `POST /api/investments`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http POST localhost:8080/api/investments \
  "Authorization: Bearer <token>" \
  amount:=100000 \
  type:="–ê–∫—Ü–∏–∏" \
  description:="–°–±–µ—Ä–±–∞–Ω–∫" \
  current_value:=105000
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "amount": 100000,
  "type": "–ê–∫—Ü–∏–∏",
  "description": "–°–±–µ—Ä–±–∞–Ω–∫",
  "current_value": 105000,
  "date": "2025-12-01"
}
```

**–ü–æ–ª—è:**
- `amount` (float, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) ‚Äî —Å—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- `type` (string) ‚Äî —Ç–∏–ø (–∞–∫—Ü–∏–∏, –æ–±–ª–∏–≥–∞—Ü–∏–∏, –∫—Ä–∏–ø—Ç–∞, —Ñ–æ–Ω–¥—ã –∏ —Ç.–¥.)
- `description` (string) ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ
- `current_value` (float) ‚Äî —Ç–µ–∫—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å
- `date` (string) ‚Äî –¥–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "id": 1,
  "user_id": 1,
  "amount": 100000,
  "type": "–ê–∫—Ü–∏–∏",
  "description": "–°–±–µ—Ä–±–∞–Ω–∫",
  "current_value": 105000,
  "date": "2025-12-01T00:00:00Z",
  "created_at": "2025-12-06T00:00:00Z"
}
```

---

### `GET /api/investments`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET localhost:8080/api/investments "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
[
  {
    "id": 1,
    "user_id": 1,
    "amount": 100000,
    "type": "–ê–∫—Ü–∏–∏",
    "description": "–°–±–µ—Ä–±–∞–Ω–∫",
    "current_value": 105000,
    "date": "2025-12-01T00:00:00Z",
    "created_at": "2025-12-06T00:00:00Z"
  }
]
```

---

### `PATCH /api/investments/:id`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http PATCH localhost:8080/api/investments/1 \
  "Authorization: Bearer <token>" \
  current_value:=110000
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "amount": 100000,
  "type": "–ê–∫—Ü–∏–∏",
  "description": "–°–±–µ—Ä–±–∞–Ω–∫",
  "current_value": 110000,
  "date": "2025-12-01"
}
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

---

### `DELETE /api/investments/:id`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http DELETE localhost:8080/api/investments/1 "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "message": "Investment deleted"
}
```

---

## üè¶ –í–∫–ª–∞–¥—ã

### `POST /api/deposits`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –û—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–≥–æ –≤–∫–ª–∞–¥–∞

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http POST localhost:8080/api/deposits \
  "Authorization: Bearer <token>" \
  amount:=500000 \
  interest_rate:=7.5 \
  description:="–í–∫–ª–∞–¥ –≤ –°–±–µ—Ä–±–∞–Ω–∫–µ" \
  term_months:=12
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "amount": 500000,
  "interest_rate": 7.5,
  "description": "–í–∫–ª–∞–¥ –≤ –°–±–µ—Ä–±–∞–Ω–∫–µ",
  "open_date": "2025-12-01",
  "term_months": 12
}
```

**–ü–æ–ª—è:**
- `amount` (float, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) ‚Äî —Å—É–º–º–∞ –≤–∫–ª–∞–¥–∞
- `interest_rate` (float) ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞
- `description` (string) ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞, —Ç–∏–ø –≤–∫–ª–∞–¥–∞)
- `open_date` (string) ‚Äî –¥–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- `term_months` (int) ‚Äî —Å—Ä–æ–∫ –≤ –º–µ—Å—è—Ü–∞—Ö (0 = –¥–æ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "id": 1,
  "user_id": 1,
  "amount": 500000,
  "interest_rate": 7.5,
  "description": "–í–∫–ª–∞–¥ –≤ –°–±–µ—Ä–±–∞–Ω–∫–µ",
  "open_date": "2025-12-01T00:00:00Z",
  "close_date": null,
  "term_months": 12,
  "created_at": "2025-12-06T00:00:00Z"
}
```

---

### `GET /api/deposits`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–∫–ª–∞–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET localhost:8080/api/deposits "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –≤–∫–ª–∞–¥–æ–≤

---

### `PATCH /api/deposits/:id`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫—Ä—ã—Ç–∏–µ)

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http PATCH localhost:8080/api/deposits/1 \
  "Authorization: Bearer <token>" \
  close_date:="2026-12-01"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "amount": 500000,
  "interest_rate": 7.5,
  "description": "–í–∫–ª–∞–¥ –≤ –°–±–µ—Ä–±–∞–Ω–∫–µ",
  "open_date": "2025-12-01",
  "close_date": "2026-12-01",
  "term_months": 12
}
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤–∫–ª–∞–¥–∞

---

### `DELETE /api/deposits/:id`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –£–¥–∞–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∞

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http DELETE localhost:8080/api/deposits/1 "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "message": "Deposit deleted"
}
```

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### `GET /api/analytics/summary`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –°–≤–æ–¥–∫–∞ –ø–æ –¥–æ—Ö–æ–¥–∞–º –∏ —Ä–∞—Å—Ö–æ–¥–∞–º –∑–∞ –º–µ—Å—è—Ü

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET "localhost:8080/api/analytics/summary?month=2025-12" "Authorization: Bearer <token>"
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `month` (string) ‚Äî –º–µ—Å—è—Ü –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "month": "2025-12",
  "total_income": 100000,
  "total_expense": 50000,
  "balance": 50000,
  "savings_rate": 50.0,
  "essential_expense": 30000,
  "non_essential_expense": 20000,
  "by_category": {
    "Food": 15000,
    "Transport": 10000,
    "Shopping": 25000
  }
}
```

---

### `GET /api/analytics/trends`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –¢—Ä–µ–Ω–¥—ã –¥–æ—Ö–æ–¥–æ–≤, —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –±–∞–ª–∞–Ω—Å–∞ –∑–∞ N –º–µ—Å—è—Ü–µ–≤

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET "localhost:8080/api/analytics/trends?months=6" "Authorization: Bearer <token>"
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `months` (int) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—è—Ü–µ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "months": [
    {
      "month": "2025-07",
      "income": 100000,
      "expense": 50000,
      "balance": 50000
    },
    {
      "month": "2025-08",
      "income": 110000,
      "expense": 55000,
      "balance": 55000
    }
  ]
}
```

---

## üíö Financial Health Score

### `GET /api/health-score`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET "localhost:8080/api/health-score?month=2025-12" "Authorization: Bearer <token>"
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `month` (string) ‚Äî –º–µ—Å—è—Ü –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "score": 87.5,
  "grade": "B",
  "emergency_fund_months": 3.45,
  "components": {
    "savings_rate": {
      "value": 25.0,
      "score": 85.0,
      "weight": 0.30,
      "details": {...}
    },
    "emergency_fund": {
      "value": 3.45,
      "score": 75.0,
      "weight": 0.25,
      "details": {...}
    },
    "spending_stability": {
      "value": 80.0,
      "score": 80.0,
      "weight": 0.25,
      "details": {...}
    },
    "essential_ratio": {
      "value": 60.0,
      "score": 90.0,
      "weight": 0.20,
      "details": {...}
    }
  },
  "trend": {
    "direction": "improving",
    "projected_score": 90.0,
    "confidence": 85.5
  },
  "insights": [
    {
      "type": "achievement",
      "message": "–û—Ç–ª–∏—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π!",
      "impact": 5.0
    }
  ],
  "benchmark": {
    "savings_rate": 20.0,
    "emergency_fund_months": 6.0
  }
}
```

---

### `GET /api/health-score/income-details`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Ö–æ–¥–∞—Ö

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET "localhost:8080/api/health-score/income-details?month=2025-12" "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "total_income": 100000,
  "savings_rate": 25.0,
  "savings_amount": 25000,
  "recommendation": "–û—Ç–ª–∏—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π!"
}
```

---

### `GET /api/health-score/expense-details`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—Ö–æ–¥–∞—Ö

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET "localhost:8080/api/health-score/expense-details?month=2025-12" "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "total_expense": 75000,
  "essential_expense": 45000,
  "non_essential_expense": 30000,
  "essential_ratio": 60.0,
  "recommendation": "–û—Ç–ª–∏—á–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ä–∞—Å—Ö–æ–¥–æ–≤!"
}
```

---

### `GET /api/health-score/savings-details`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è—Ö –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –ø–æ–¥—É—à–∫–µ

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET localhost:8080/api/health-score/savings-details "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "total_balance": 500000,
  "emergency_fund_months": 6.67,
  "avg_monthly_expense": 75000,
  "recommendation": "–û—Ç–ª–∏—á–Ω–∞—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞!"
}
```

---

### `GET /api/health-score/essential-details`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö/–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET "localhost:8080/api/health-score/essential-details?month=2025-12" "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "total_expense": 75000,
  "essential_expense": 45000,
  "non_essential_expense": 30000,
  "ratio": 60.0,
  "recommendation": "–û—Ç–ª–∏—á–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ä–∞—Å—Ö–æ–¥–æ–≤!"
}
```

---

### `GET /api/health-score/investment-details`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET localhost:8080/api/health-score/investment-details "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "total_amount": 100000,
  "total_current_value": 105000,
  "profit": 5000,
  "profit_percent": 5.0,
  "recommendation": "–û—Ç–ª–∏—á–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å!"
}
```

---

### `GET /api/health-score/deposit-details`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∫–ª–∞–¥–∞—Ö

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET localhost:8080/api/health-score/deposit-details "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "total_amount": 500000,
  "total_interest": 37500,
  "active_deposits": 1,
  "recommendation": "–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π –¥–æ—Ö–æ–¥: 37500‚ÇΩ"
}
```

---

## ü§ñ AI –ß–∞—Ç

### `POST /api/chat`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è AI-–ø–æ–º–æ—â–Ω–∏–∫—É —Å –ø–æ–ª–Ω—ã–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http POST localhost:8080/api/chat \
  "Authorization: Bearer <token>" \
  message:="–°–∫–æ–ª—å–∫–æ —É –º–µ–Ω—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤?"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:**
```json
{
  "message": "–°–∫–æ–ª—å–∫–æ —É –º–µ–Ω—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤?"
}
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "message": "–£ –≤–∞—Å 500000‚ÇΩ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è!"
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- AI –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Health Score, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º, –∞–Ω–∞–ª–∏—Ç–∏–∫–µ, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º, –≤–∫–ª–∞–¥–∞–º
- –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤
- –î–∞—ë—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å —Ü–∏—Ñ—Ä–∞–º–∏

---

### `GET /api/chat/history`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ —Å AI

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET "localhost:8080/api/chat/history?limit=50" "Authorization: Bearer <token>"
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50, –º–∞–∫—Å–∏–º—É–º 100)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "messages": [
    {
      "id": 1,
      "user_id": 1,
      "role": "user",
      "content": "–°–∫–æ–ª—å–∫–æ —É –º–µ–Ω—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤?",
      "created_at": "2025-12-06T00:00:00Z"
    },
    {
      "id": 2,
      "user_id": 1,
      "role": "assistant",
      "content": "–£ –≤–∞—Å 500000‚ÇΩ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤...",
      "created_at": "2025-12-06T00:00:01Z"
    }
  ]
}
```

---

## üîÆ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ

### `POST /api/analyze`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–ª–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —Å ML-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–∞—Å—Ö–æ–¥–æ–≤

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http POST localhost:8080/api/analyze "Authorization: Bearer <token>"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:** –ù–µ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "budget_health": {
    "score": 87,
    "status": "Excellent",
    "saved_percent": 87.3,
    "spent_percent": 12.7,
    "description": "–í—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ 87%. –†–µ–π—Ç–∏–Ω–≥: 87/100."
  },
  "ml_forecast": {
    "predicted_expense_next_month": 848.99,
    "model_used": "Prophet (Meta TimeSeries)"
  },
  "financial_cushion": {
    "target_amount": 2900,
    "current_amount": 151926,
    "progress_percent": 5238.8,
    "reasoning": "–¶–µ–ª—å: 6 –º–µ—Å. (–í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)"
  },
  "metrics": {
    "avg_monthly_income": 6692,
    "avg_monthly_expense": 848
  },
  "mandatory_expenses": {
    "total": 409,
    "categories": ["Food", "Rent"]
  },
  "optimization_plan": [
    {
      "category": "Shopping",
      "current_spend": 2749,
      "action": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è 'Shopping' –∑–∞–Ω–∏–º–∞–µ—Ç 2748 —Ä/–º–µ—Å.",
      "recommendation": "–°–æ–∫—Ä–∞—Ç–∏—Ç–µ –Ω–∞ 15% (+412 —Ä)."
    }
  ]
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Prophet –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

### `GET /api/predict`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü—Ä–æ–≥–Ω–æ–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http GET localhost:8080/api/predict "Authorization: Bearer <token>"
```

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "predicted_expense_next_month": 848.99,
  "model_used": "Prophet (Meta TimeSeries)",
  "current_monthly_expense": 848,
  "current_monthly_income": 6692
}
```

---

## üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### `GET /api/notifications`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
# –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
http GET localhost:8080/api/notifications "Authorization: Bearer <token>"

# –¢–æ–ª—å–∫–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
http GET "localhost:8080/api/notifications?unread_only=true" "Authorization: Bearer <token>"

# –° –ª–∏–º–∏—Ç–æ–º
http GET "localhost:8080/api/notifications?limit=20" "Authorization: Bearer <token>"
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (int) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50, –º–∞–∫—Å–∏–º—É–º 100)
- `unread_only` (boolean) ‚Äî —Ç–æ–ª—å–∫–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`)

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
[
  {
    "id": 1,
    "user_id": 1,
    "type": "anomaly",
    "title": "‚ö†Ô∏è –ê–Ω–æ–º–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞",
    "message": "–°—É–º–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Å—Ä–µ–¥–Ω—é—é –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –°—É–º–º–∞: -60000.00‚ÇΩ, –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Shopping. –í—ã—Å–æ–∫–∞—è",
    "is_read": false,
    "created_at": "2025-12-06T00:00:00Z"
  },
  {
    "id": 2,
    "user_id": 1,
    "type": "category_limit",
    "title": "üìä –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
    "message": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è 'Shopping': –ø–æ—Ç—Ä–∞—á–µ–Ω–æ 128246.90‚ÇΩ –∏–∑ –ª–∏–º–∏—Ç–∞ 27298.76‚ÇΩ (470%)",
    "is_read": false,
    "created_at": "2025-12-06T00:00:01Z"
  }
]
```

**–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- `anomaly` ‚Äî –∞–Ω–æ–º–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
- `category_limit` ‚Äî –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `cushion` ‚Äî —Å–Ω–∏–∂–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –ø–æ–¥—É—à–∫–∏

---

### `PATCH /api/notifications/:id/read`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–º–µ—Ç–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http PATCH localhost:8080/api/notifications/1/read "Authorization: Bearer <token>"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:** –ù–µ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "message": "Notification marked as read"
}
```

---

### `PATCH /api/notifications/read-all`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–º–µ—Ç–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ

**–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å:**
```bash
http PATCH localhost:8080/api/notifications/read-all "Authorization: Bearer <token>"
```

**–ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç:** –ù–µ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞

**–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "message": "All notifications marked as read"
}
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∫—Ä–æ–º–µ `/health`, `/api/register` –∏ `/api/login`, —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <token>
```

–¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 7 –¥–Ω–µ–π.

### –§–æ—Ä–º–∞—Ç—ã –¥–∞—Ç

- **–î–∞—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** `YYYY-MM-DD` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2025-12-06`)
- **–ú–µ—Å—è—Ü –≤ query:** `YYYY-MM` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2025-12`)
- **–û—Ç–≤–µ—Ç—ã API:** ISO 8601 (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2025-12-06T00:00:00Z`)

### –û—à–∏–±–∫–∏

–í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```json
{
  "error": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

–ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤:
- `200` ‚Äî —É—Å–ø–µ—Ö
- `201` ‚Äî —Å–æ–∑–¥–∞–Ω–æ
- `400` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `401` ‚Äî –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- `403` ‚Äî –∑–∞–ø—Ä–µ—â–µ–Ω–æ
- `404` ‚Äî –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- `500` ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
- `Food` ‚Äî –ï–¥–∞
- `Transport` ‚Äî –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- `Shopping` ‚Äî –ü–æ–∫—É–ø–∫–∏
- `Rent` ‚Äî –ñ–∏–ª—å–µ
- `Health` ‚Äî –ó–¥–æ—Ä–æ–≤—å–µ
- `Education` ‚Äî –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
- `Entertainment` ‚Äî –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
- `Salary` ‚Äî –ó–∞—Ä–ø–ª–∞—Ç–∞
- `Misc` / `–î—Ä—É–≥–æ–µ` ‚Äî –ü—Ä–æ—á–µ–µ

---

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

```bash
# 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
TOKEN=$(http POST localhost:8080/api/register email=user@example.com password=pass123 | jq -r '.token')

# 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
http POST localhost:8080/api/transactions \
  "Authorization: Bearer $TOKEN" \
  amount:=-500 \
  description:="–û–±–µ–¥" \
  type:=expense

# 3. –ü–æ–ª—É—á–µ–Ω–∏–µ Health Score
http GET "localhost:8080/api/health-score" "Authorization: Bearer $TOKEN"

# 4. –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –ø—Ä–æ–≥–Ω–æ–∑–æ–º
http POST localhost:8080/api/analyze "Authorization: Bearer $TOKEN"

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
http GET localhost:8080/api/notifications "Authorization: Bearer $TOKEN"
```

---

**–í–µ—Ä—Å–∏—è API:** 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-06

